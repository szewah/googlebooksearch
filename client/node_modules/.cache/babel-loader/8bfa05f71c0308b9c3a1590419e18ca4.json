{"ast":null,"code":"var _jsxFileName = \"/Users/szewahleong/Desktop/Columbia Bootcamp/googlebooksearch/client/src/pages/Search.js\";\nimport React, { Component } from \"react\";\nimport API from \"../utils/API\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport Card from \"../components/Card/Card\";\nimport \"./style.css\";\n\nclass Search extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      query: \"\",\n      books: [],\n      message: \"\",\n      error: \" \"\n    };\n\n    this.handleInputChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleFormSubmit = event => {\n      event.preventDefault();\n      console.log(\"[DEBUG] query\", this.state.query);\n      API.getSearchedBooks(this.state.query).then(res => {\n        console.log(\"[DEBUG] response data\", res.data.items);\n        const books = res.data.items.map(item => {\n          console.log(\"[DEBUG] imageLinks\", item.volumeInfo.imageLinks);\n          const book = {\n            key: item.id,\n            id: item.id,\n            title: item.volumeInfo.title,\n            author: item.volumeInfo.authors,\n            description: item.volumeInfo.description,\n            image: !!item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : \"https://place-hold.it/53x80\",\n            link: item.volumeInfo.infoLink\n          };\n          return book;\n        });\n        console.log(\"[DEBUG] books\", books);\n        this.setState({\n          books: books,\n          error: \"\",\n          query: \"\"\n        });\n      }).catch(err => {\n        console.log(\"[DEBUG] error handling response\", err);\n        this.setState({\n          error: err.items\n        });\n      });\n    };\n\n    this.handleSavedButton = event => {\n      event.preventDefault();\n      let savedBooks = this.state.books.filter(book => book.id === event.target.id);\n      API.saveBook(savedBooks).then(this.setState({\n        message: alert(\"Your book is saved\")\n      })).catch(err => console.log(err));\n    };\n  }\n\n  render() {\n    console.log(\"[DEBUG] books at render\", this.state.books);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Jumbotron, {\n      handleInputChange: this.handleInputChange,\n      handleFormSubmit: this.handleFormSubmit,\n      q: this.state.query,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(Card, {\n      books: this.state.books,\n      handleSavedButton: this.handleSavedButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/szewahleong/Desktop/Columbia Bootcamp/googlebooksearch/client/src/pages/Search.js"],"names":["React","Component","API","Jumbotron","Card","Search","state","query","books","message","error","handleInputChange","event","target","name","value","setState","handleFormSubmit","preventDefault","console","log","getSearchedBooks","then","res","data","items","map","item","volumeInfo","imageLinks","book","key","id","title","author","authors","description","image","thumbnail","link","infoLink","catch","err","handleSavedButton","savedBooks","filter","saveBook","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../utils/API\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport Card from \"../components/Card/Card\";\n\nimport \"./style.css\";\n\nclass Search extends Component {\n  state = {\n    query: \"\",\n    books: [],\n    message: \"\",\n    error: \" \"\n  };\n\n  handleInputChange = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    console.log(\"[DEBUG] query\", this.state.query);\n    API.getSearchedBooks(this.state.query)\n      .then(res => {\n        console.log(\"[DEBUG] response data\", res.data.items);\n        const books = res.data.items.map(item => {\n          console.log(\"[DEBUG] imageLinks\", item.volumeInfo.imageLinks);\n          const book = {\n            key: item.id,\n            id: item.id,\n            title: item.volumeInfo.title,\n            author: item.volumeInfo.authors,\n            description: item.volumeInfo.description,\n            image: !!item.volumeInfo.imageLinks\n              ? item.volumeInfo.imageLinks.thumbnail\n              : \"https://place-hold.it/53x80\",\n            link: item.volumeInfo.infoLink\n          };\n          return book;\n        });\n        console.log(\"[DEBUG] books\", books);\n        this.setState({ books: books, error: \"\", query: \"\" });\n      })\n      .catch(err => {\n        console.log(\"[DEBUG] error handling response\", err);\n        this.setState({ error: err.items });\n      });\n  };\n\n  handleSavedButton = event => {\n    event.preventDefault();\n    let savedBooks = this.state.books.filter(\n      book => book.id === event.target.id\n    );\n    API.saveBook(savedBooks)\n      .then(this.setState({ message: alert(\"Your book is saved\") }))\n      .catch(err => console.log(err));\n  };\n\n  render() {\n    console.log(\"[DEBUG] books at render\", this.state.books);\n    return (\n      <div>\n        <Jumbotron\n          handleInputChange={this.handleInputChange}\n          handleFormSubmit={this.handleFormSubmit}\n          q={this.state.query}\n        />\n\n        <Card\n          books={this.state.books}\n          handleSavedButton={this.handleSavedButton}\n        />\n      </div>\n    );\n  }\n}\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}